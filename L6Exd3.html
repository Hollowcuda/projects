<html>
   <head>
     <script>
            // Задаём первоначальный список
           let Spisok = [
           [1, "Рикко Гросс", 2 , 3],
           [2, "Мартен Фуркад", 4 , 5],
           [3, "Свен Фишер", 5 , 4],
           [4, "Владимир Драчев", 4 , 5],
           [5, "Халвард Ханеволд", 1 , 3],
           [6, "Клаус Зиберт", 0 , 1],
           [7, "Александр Кержаков", 0 , 0],
           [8, "Петер Ангерер", 4 , 2],
           [9, "Уле-Эйнар Бьёрндален", 5 , 5],
           [10, "Ларс Бергер", 2 , 2]
           ];
           // Задание 1
           // Вытаскиваем из матрицы позицию и сумму попаданий, создаём ассоциативный массив
           let match = new Map([]);

            for(let i = 0; i < 10; i++){
            match.set(Spisok[i][0], Spisok[i][2] + Spisok[i][3]);
            };
            console.log(match);
            // Распускаем ассоциативный массив на 2 массива
            let values = Array.from(match.values());
            let places = Array.from(match.keys());
            console.log(values);
            console.log(places);
            // Сортировка пузырьком;
            let x;
            let y;
            let N = values.length;

            for (let i = 0; i < N; i++){
                 for (let j = 0; j < N - 1 - i; j++){
                      if (values[j] < values[j + 1]){
                         x = values[j + 1];
                         y = places[j + 1];
                         values[j + 1] = values[j]; // Сразу оба массива переписываем
                         values[j] = x;
                         places[j + 1] = places[j];
                         places[j] = y;
                      };
                  };        
               };
            // Матрица под результаты, ключ сравнения - номер из оригинального списка
            let results = [];
            for (let i = 0; i < N; i++){
                  results[i] = [];
                  for (let j = 0; j < N; j++){
                  if (places[i] == Spisok[j][0]){
                     results[i][0] = Spisok[j][1];
                     results[i][1] = values[i];

                  };
               };
            };
            document.write("Список биатлонистов по общим попаданиям: " + "<br>");
            for ( let i = 0; i < N; i++){
            document.write(results[i][0] + " " + results[i][1] + "<br>")
            };
            // Задание 2
            // Снова делаем ассоциативный массив из значений, соответствующих условию не более 2х промахов на 2ом рубеже
            let sp2 = new Map ([]);
            for (let i = 0; i < N; i++){
               if (Spisok[i][3] >= 3){
                  sp2.set(Spisok[i][1], Spisok[i][2] )
               };
            };
            console.log(sp2);
            let M = sp2.size;
            // Парсим ассоциативный массив на 2. Мне просто нравится держать значения в ассоциативном массиве
            let val2 = Array.from(sp2.values());
            let pla2 = Array.from(sp2.keys());
            
            // Сортировка "пузырьком"
            for (let i = 0; i < M; i++){
                 for (let j = 0; j < M - 1 - i; j++){
                      if (val2[j] < val2[j + 1]){
                         x = val2[j + 1];
                         y = pla2[j + 1];
                         val2[j + 1] = val2[j];
                         val2[j] = x;
                         pla2[j + 1] = pla2[j];
                         pla2[j] = y;
                      };
                  };        
               };
            console.log(val2);
            console.log(pla2);
            // Заполняем матрицу под результаты 2го подзадания
            let res2 = [];
            for (let i = 0; i < M; i++){
               res2[i] = [];
               res2[i][0]=pla2[i];
               res2[i][1]=val2[i]
                  };
            document.write("<br>");
            document.write("Cписок биатлонистов, совершивших не более двух промахов на втором огневом рубеже в порядке убывания количества попаданий на первом огневом рубеже: " + "<br>");
            for ( let i = 0; i < N; i++){
            document.write(res2[i][0] + " " + res2[i][1] + "<br>")
            };
     </script>
   </head>
   <body>
   </body>
</html>